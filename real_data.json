{
    "$schema": "https://vega.github.io/schema/vega-lite/v4.json",
    "description": "Nombre de passages de v√©lo",
    "data": {
      "values": [
        {"time": "2023-02-20T02:00:00.000+01:00", "count": 11, "id": "N-S"},
        {"time": "2023-02-20T02:00:00.000+01:00", "count": 24, "id": "S-N"},
        {"time": "2023-02-20T03:00:00.000+01:00", "count": 6, "id": "N-S"},
        {"time": "2023-02-20T03:00:00.000+01:00", "count": 10, "id": "S-N"},
        {"time": "2023-02-20T04:00:00.000+01:00", "count": 4, "id": "N-S"},
        {"time": "2023-02-20T04:00:00.000+01:00", "count": 12, "id": "S-N"},
        {"time": "2023-02-20T05:00:00.000+01:00", "count": 22, "id": "N-S"},
        {"time": "2023-02-20T05:00:00.000+01:00", "count": 12, "id": "S-N"},
        {"time": "2023-02-20T06:00:00.000+01:00", "count": 59, "id": "N-S"},
        {"time": "2023-02-20T06:00:00.000+01:00", "count": 34, "id": "S-N"},
        {"time": "2023-02-20T07:00:00.000+01:00", "count": 188, "id": "N-S"},
        {"time": "2023-02-20T07:00:00.000+01:00", "count": 107, "id": "S-N"},
        {"time": "2023-02-20T08:00:00.000+01:00", "count": 615, "id": "N-S"},
        {"time": "2023-02-20T08:00:00.000+01:00", "count": 428, "id": "S-N"},
        {"time": "2023-02-20T09:00:00.000+01:00", "count": 627, "id": "N-S"},
        {"time": "2023-02-20T09:00:00.000+01:00", "count": 590, "id": "S-N"},
        {"time": "2023-02-20T10:00:00.000+01:00", "count": 256, "id": "N-S"},
        {"time": "2023-02-20T10:00:00.000+01:00", "count": 213, "id": "S-N"},
        {"time": "2023-02-20T11:00:00.000+01:00", "count": 210, "id": "N-S"},
        {"time": "2023-02-20T11:00:00.000+01:00", "count": 180, "id": "S-N"},
        {"time": "2023-02-20T12:00:00.000+01:00", "count": 265, "id": "N-S"},
        {"time": "2023-02-20T12:00:00.000+01:00", "count": 295, "id": "S-N"},
        {"time": "2023-02-20T13:00:00.000+01:00", "count": 296, "id": "N-S"},
        {"time": "2023-02-20T13:00:00.000+01:00", "count": 286, "id": "S-N"},
        {"time": "2023-02-20T14:00:00.000+01:00", "count": 252, "id": "N-S"},
        {"time": "2023-02-20T14:00:00.000+01:00", "count": 274, "id": "S-N"},
        {"time": "2023-02-20T15:00:00.000+01:00", "count": 216, "id": "N-S"},
        {"time": "2023-02-20T15:00:00.000+01:00", "count": 343, "id": "S-N"},
        {"time": "2023-02-20T16:00:00.000+01:00", "count": 256, "id": "N-S"},
        {"time": "2023-02-20T16:00:00.000+01:00", "count": 382, "id": "S-N"},
        {"time": "2023-02-20T17:00:00.000+01:00", "count": 346, "id": "N-S"},
        {"time": "2023-02-20T17:00:00.000+01:00", "count": 569, "id": "S-N"},
        {"time": "2023-02-20T18:00:00.000+01:00", "count": 622, "id": "N-S"},
        {"time": "2023-02-20T18:00:00.000+01:00", "count": 904, "id": "S-N"},
        {"time": "2023-02-20T19:00:00.000+01:00", "count": 576, "id": "N-S"},
        {"time": "2023-02-20T19:00:00.000+01:00", "count": 981, "id": "S-N"},
        {"time": "2023-02-20T20:00:00.000+01:00", "count": 265, "id": "N-S"},
        {"time": "2023-02-20T20:00:00.000+01:00", "count": 552, "id": "S-N"},
        {"time": "2023-02-20T21:00:00.000+01:00", "count": 204, "id": "N-S"},
        {"time": "2023-02-20T21:00:00.000+01:00", "count": 332, "id": "S-N"},
        {"time": "2023-02-20T22:00:00.000+01:00", "count": 176, "id": "N-S"},
        {"time": "2023-02-20T22:00:00.000+01:00", "count": 338, "id": "S-N"},
        {"time": "2023-02-20T23:00:00.000+01:00", "count": 95, "id": "N-S"},
        {"time": "2023-02-20T23:00:00.000+01:00", "count": 238, "id": "S-N"},
        {"time": "2023-02-21T00:00:00.000+01:00", "count": 55, "id": "N-S"},
        {"time": "2023-02-21T00:00:00.000+01:00", "count": 109, "id": "S-N"},
        {"time": "2023-02-21T01:00:00.000+01:00", "count": 28, "id": "N-S"},
        {"time": "2023-02-21T01:00:00.000+01:00", "count": 68, "id": "S-N"},
        {"time": "2023-02-21T02:00:00.000+01:00", "count": 14, "id": "N-S"},
        {"time": "2023-02-21T02:00:00.000+01:00", "count": 18, "id": "S-N"},
        {"time": "2023-02-21T03:00:00.000+01:00", "count": 11, "id": "N-S"},
        {"time": "2023-02-21T03:00:00.000+01:00", "count": 2, "id": "S-N"},
        {"time": "2023-02-21T04:00:00.000+01:00", "count": 5, "id": "N-S"},
        {"time": "2023-02-21T04:00:00.000+01:00", "count": 17, "id": "S-N"},
        {"time": "2023-02-21T05:00:00.000+01:00", "count": 22, "id": "N-S"},
        {"time": "2023-02-21T05:00:00.000+01:00", "count": 7, "id": "S-N"},
        {"time": "2023-02-21T06:00:00.000+01:00", "count": 58, "id": "N-S"},
        {"time": "2023-02-21T06:00:00.000+01:00", "count": 37, "id": "S-N"},
        {"time": "2023-02-21T07:00:00.000+01:00", "count": 248, "id": "N-S"},
        {"time": "2023-02-21T07:00:00.000+01:00", "count": 145, "id": "S-N"},
        {"time": "2023-02-21T08:00:00.000+01:00", "count": 674, "id": "N-S"},
        {"time": "2023-02-21T08:00:00.000+01:00", "count": 484, "id": "S-N"},
        {"time": "2023-02-21T09:00:00.000+01:00", "count": 714, "id": "N-S"},
        {"time": "2023-02-21T09:00:00.000+01:00", "count": 674, "id": "S-N"},
        {"time": "2023-02-21T10:00:00.000+01:00", "count": 290, "id": "N-S"},
        {"time": "2023-02-21T10:00:00.000+01:00", "count": 269, "id": "S-N"},
        {"time": "2023-02-21T11:00:00.000+01:00", "count": 230, "id": "N-S"},
        {"time": "2023-02-21T11:00:00.000+01:00", "count": 226, "id": "S-N"},
        {"time": "2023-02-21T12:00:00.000+01:00", "count": 329, "id": "N-S"},
        {"time": "2023-02-21T12:00:00.000+01:00", "count": 292, "id": "S-N"},
        {"time": "2023-02-21T13:00:00.000+01:00", "count": 262, "id": "N-S"},
        {"time": "2023-02-21T13:00:00.000+01:00", "count": 370, "id": "S-N"},
        {"time": "2023-02-21T14:00:00.000+01:00", "count": 289, "id": "N-S"},
        {"time": "2023-02-21T14:00:00.000+01:00", "count": 323, "id": "S-N"},
        {"time": "2023-02-21T15:00:00.000+01:00", "count": 208, "id": "N-S"},
        {"time": "2023-02-21T15:00:00.000+01:00", "count": 311, "id": "S-N"},
        {"time": "2023-02-21T16:00:00.000+01:00", "count": 261, "id": "N-S"},
        {"time": "2023-02-21T16:00:00.000+01:00", "count": 358, "id": "S-N"},
        {"time": "2023-02-21T17:00:00.000+01:00", "count": 385, "id": "N-S"},
        {"time": "2023-02-21T17:00:00.000+01:00", "count": 651, "id": "S-N"},
        {"time": "2023-02-21T18:00:00.000+01:00", "count": 648, "id": "N-S"},
        {"time": "2023-02-21T18:00:00.000+01:00", "count": 1017, "id": "S-N"},
        {"time": "2023-02-21T19:00:00.000+01:00", "count": 644, "id": "N-S"},
        {"time": "2023-02-21T19:00:00.000+01:00", "count": 1037, "id": "S-N"},
        {"time": "2023-02-21T20:00:00.000+01:00", "count": 324, "id": "N-S"},
        {"time": "2023-02-21T20:00:00.000+01:00", "count": 631, "id": "S-N"},
        {"time": "2023-02-21T21:00:00.000+01:00", "count": 239, "id": "N-S"},
        {"time": "2023-02-21T21:00:00.000+01:00", "count": 340, "id": "S-N"},
        {"time": "2023-02-21T22:00:00.000+01:00", "count": 213, "id": "N-S"},
        {"time": "2023-02-21T22:00:00.000+01:00", "count": 404, "id": "S-N"},
        {"time": "2023-02-21T23:00:00.000+01:00", "count": 226, "id": "N-S"},
        {"time": "2023-02-21T23:00:00.000+01:00", "count": 362, "id": "S-N"}
      ]
    },
    "transform": [
      {
        "joinaggregate": [{"op": "sum", "field": "count", "as": "total"}],
        "groupby": ["time"]
      }
    ],
    "width": 600,
    "mark": "bar",
    "encoding": {
      "x": {
        "field": "time",
        "axis": {
          "title": "",
          "tickCount": 8,
          "labelAlign": "left",
          "labelExpr": "[timeFormat(datum.value, '%H:%M'), timeFormat(datum.value, '%H') == '00' ? timeFormat(datum.value, '%e %b') : '']",
          "labelOffset": 4,
          "labelPadding": -24,
          "tickSize": 30,
          "gridDash": {
            "condition": {
              "test": {"field": "value", "timeUnit": "hours", "equal": 0},
              "value": []
            },
            "value": [2, 2]
          },
          "tickDash": {
            "condition": {
              "test": {"field": "value", "timeUnit": "hours", "equal": 0},
              "value": []
            },
            "value": [2, 2]
          }
        },
        "timeUnit": "yearmonthdatehours"
      },
      "y": {
        "field": "count",
        "type": "quantitative",
        "axis": {"title": "Passages par heure"}
      },
      "color": {
        "field": "id",
        "legend": {"title": "Compteur"},
        "scale": {"range": ["#75CBB7", "#CAE26E"]}
      },
      "tooltip": [
        {"field": "id", "title": "Sens"},
        {
          "field": "time",
          "title": "Moment",
          "type": "temporal",
          "format": "%H:%M"
        },
        {"field": "count", "title": "Passages"},
        {"field": "total", "title": "Passages total"}
      ]
    }
}