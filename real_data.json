{
  "$schema": "https://vega.github.io/schema/vega-lite/v4.json",
  "description": "Nombre de passages de v√©lo",
  "data": {
    "values": [
      {"time": "2023-06-12T03:00:00.000+02:00", "count": 13, "id": "EW"},
      {"time": "2023-06-12T03:00:00.000+02:00", "count": 2, "id": "WE"},
      {"time": "2023-06-12T04:00:00.000+02:00", "count": 0, "id": "EW"},
      {"time": "2023-06-12T04:00:00.000+02:00", "count": 2, "id": "WE"},
      {"time": "2023-06-12T05:00:00.000+02:00", "count": 2, "id": "EW"},
      {"time": "2023-06-12T05:00:00.000+02:00", "count": 5, "id": "WE"},
      {"time": "2023-06-12T06:00:00.000+02:00", "count": 18, "id": "EW"},
      {"time": "2023-06-12T06:00:00.000+02:00", "count": 11, "id": "WE"},
      {"time": "2023-06-12T07:00:00.000+02:00", "count": 80, "id": "EW"},
      {"time": "2023-06-12T07:00:00.000+02:00", "count": 39, "id": "WE"},
      {"time": "2023-06-12T08:00:00.000+02:00", "count": 81, "id": "EW"},
      {"time": "2023-06-12T08:00:00.000+02:00", "count": 92, "id": "WE"},
      {"time": "2023-06-12T09:00:00.000+02:00", "count": 92, "id": "EW"},
      {"time": "2023-06-12T09:00:00.000+02:00", "count": 98, "id": "WE"},
      {"time": "2023-06-12T10:00:00.000+02:00", "count": 31, "id": "EW"},
      {"time": "2023-06-12T10:00:00.000+02:00", "count": 55, "id": "WE"},
      {"time": "2023-06-12T11:00:00.000+02:00", "count": 34, "id": "EW"},
      {"time": "2023-06-12T11:00:00.000+02:00", "count": 44, "id": "WE"},
      {"time": "2023-06-12T12:00:00.000+02:00", "count": 60, "id": "EW"},
      {"time": "2023-06-12T12:00:00.000+02:00", "count": 94, "id": "WE"},
      {"time": "2023-06-12T13:00:00.000+02:00", "count": 68, "id": "EW"},
      {"time": "2023-06-12T13:00:00.000+02:00", "count": 69, "id": "WE"},
      {"time": "2023-06-12T14:00:00.000+02:00", "count": 33, "id": "EW"},
      {"time": "2023-06-12T14:00:00.000+02:00", "count": 44, "id": "WE"},
      {"time": "2023-06-12T15:00:00.000+02:00", "count": 41, "id": "EW"},
      {"time": "2023-06-12T15:00:00.000+02:00", "count": 25, "id": "WE"},
      {"time": "2023-06-12T16:00:00.000+02:00", "count": 31, "id": "EW"},
      {"time": "2023-06-12T16:00:00.000+02:00", "count": 47, "id": "WE"},
      {"time": "2023-06-12T17:00:00.000+02:00", "count": 50, "id": "EW"},
      {"time": "2023-06-12T17:00:00.000+02:00", "count": 86, "id": "WE"},
      {"time": "2023-06-12T18:00:00.000+02:00", "count": 74, "id": "EW"},
      {"time": "2023-06-12T18:00:00.000+02:00", "count": 140, "id": "WE"},
      {"time": "2023-06-12T19:00:00.000+02:00", "count": 99, "id": "EW"},
      {"time": "2023-06-12T19:00:00.000+02:00", "count": 141, "id": "WE"},
      {"time": "2023-06-12T20:00:00.000+02:00", "count": 66, "id": "EW"},
      {"time": "2023-06-12T20:00:00.000+02:00", "count": 74, "id": "WE"},
      {"time": "2023-06-12T21:00:00.000+02:00", "count": 46, "id": "EW"},
      {"time": "2023-06-12T21:00:00.000+02:00", "count": 48, "id": "WE"},
      {"time": "2023-06-12T22:00:00.000+02:00", "count": 29, "id": "EW"},
      {"time": "2023-06-12T22:00:00.000+02:00", "count": 39, "id": "WE"},
      {"time": "2023-06-12T23:00:00.000+02:00", "count": 41, "id": "EW"},
      {"time": "2023-06-12T23:00:00.000+02:00", "count": 30, "id": "WE"},
      {"time": "2023-06-13T00:00:00.000+02:00", "count": 21, "id": "EW"},
      {"time": "2023-06-13T00:00:00.000+02:00", "count": 6, "id": "WE"},
      {"time": "2023-06-13T01:00:00.000+02:00", "count": 12, "id": "EW"},
      {"time": "2023-06-13T01:00:00.000+02:00", "count": 10, "id": "WE"},
      {"time": "2023-06-13T02:00:00.000+02:00", "count": 6, "id": "EW"},
      {"time": "2023-06-13T02:00:00.000+02:00", "count": 6, "id": "WE"},
      {"time": "2023-06-13T03:00:00.000+02:00", "count": 0, "id": "EW"},
      {"time": "2023-06-13T03:00:00.000+02:00", "count": 5, "id": "WE"},
      {"time": "2023-06-13T04:00:00.000+02:00", "count": 0, "id": "EW"},
      {"time": "2023-06-13T04:00:00.000+02:00", "count": 1, "id": "WE"},
      {"time": "2023-06-13T05:00:00.000+02:00", "count": 5, "id": "EW"},
      {"time": "2023-06-13T05:00:00.000+02:00", "count": 2, "id": "WE"},
      {"time": "2023-06-13T06:00:00.000+02:00", "count": 18, "id": "EW"},
      {"time": "2023-06-13T06:00:00.000+02:00", "count": 10, "id": "WE"},
      {"time": "2023-06-13T07:00:00.000+02:00", "count": 115, "id": "EW"},
      {"time": "2023-06-13T07:00:00.000+02:00", "count": 70, "id": "WE"},
      {"time": "2023-06-13T08:00:00.000+02:00", "count": 104, "id": "EW"},
      {"time": "2023-06-13T08:00:00.000+02:00", "count": 118, "id": "WE"},
      {"time": "2023-06-13T09:00:00.000+02:00", "count": 96, "id": "EW"},
      {"time": "2023-06-13T09:00:00.000+02:00", "count": 129, "id": "WE"},
      {"time": "2023-06-13T10:00:00.000+02:00", "count": 38, "id": "EW"},
      {"time": "2023-06-13T10:00:00.000+02:00", "count": 57, "id": "WE"},
      {"time": "2023-06-13T11:00:00.000+02:00", "count": 40, "id": "EW"},
      {"time": "2023-06-13T11:00:00.000+02:00", "count": 64, "id": "WE"},
      {"time": "2023-06-13T12:00:00.000+02:00", "count": 74, "id": "EW"},
      {"time": "2023-06-13T12:00:00.000+02:00", "count": 88, "id": "WE"},
      {"time": "2023-06-13T13:00:00.000+02:00", "count": 55, "id": "EW"},
      {"time": "2023-06-13T13:00:00.000+02:00", "count": 71, "id": "WE"},
      {"time": "2023-06-13T14:00:00.000+02:00", "count": 44, "id": "EW"},
      {"time": "2023-06-13T14:00:00.000+02:00", "count": 69, "id": "WE"},
      {"time": "2023-06-13T15:00:00.000+02:00", "count": 35, "id": "EW"},
      {"time": "2023-06-13T15:00:00.000+02:00", "count": 48, "id": "WE"},
      {"time": "2023-06-13T16:00:00.000+02:00", "count": 46, "id": "EW"},
      {"time": "2023-06-13T16:00:00.000+02:00", "count": 63, "id": "WE"},
      {"time": "2023-06-13T17:00:00.000+02:00", "count": 73, "id": "EW"},
      {"time": "2023-06-13T17:00:00.000+02:00", "count": 90, "id": "WE"},
      {"time": "2023-06-13T18:00:00.000+02:00", "count": 95, "id": "EW"},
      {"time": "2023-06-13T18:00:00.000+02:00", "count": 176, "id": "WE"},
      {"time": "2023-06-13T19:00:00.000+02:00", "count": 81, "id": "EW"},
      {"time": "2023-06-13T19:00:00.000+02:00", "count": 191, "id": "WE"},
      {"time": "2023-06-13T20:00:00.000+02:00", "count": 58, "id": "EW"},
      {"time": "2023-06-13T20:00:00.000+02:00", "count": 90, "id": "WE"},
      {"time": "2023-06-13T21:00:00.000+02:00", "count": 40, "id": "EW"},
      {"time": "2023-06-13T21:00:00.000+02:00", "count": 51, "id": "WE"},
      {"time": "2023-06-13T22:00:00.000+02:00", "count": 40, "id": "EW"},
      {"time": "2023-06-13T22:00:00.000+02:00", "count": 47, "id": "WE"},
      {"time": "2023-06-13T23:00:00.000+02:00", "count": 49, "id": "EW"},
      {"time": "2023-06-13T23:00:00.000+02:00", "count": 25, "id": "WE"}
    ]
  },
  "transform": [
    {
      "joinaggregate": [{"op": "sum", "field": "count", "as": "total"}],
      "groupby": ["time"]
    }
  ],
  "width": 600,
  "mark": "bar",
  "encoding": {
    "x": {
      "field": "time",
      "axis": {
        "title": "",
        "tickCount": 8,
        "labelAlign": "left",
        "labelExpr": "[timeFormat(datum.value, '%H:%M'), timeFormat(datum.value, '%H') == '00' ? timeFormat(datum.value, '%e %b') : '']",
        "labelOffset": 4,
        "labelPadding": -24,
        "tickSize": 30,
        "gridDash": {
          "condition": {
            "test": {"field": "value", "timeUnit": "hours", "equal": 0},
            "value": []
          },
          "value": [2, 2]
        },
        "tickDash": {
          "condition": {
            "test": {"field": "value", "timeUnit": "hours", "equal": 0},
            "value": []
          },
          "value": [2, 2]
        }
      },
      "timeUnit": "yearmonthdatehours"
    },
    "y": {
      "field": "count",
      "type": "quantitative",
      "axis": {"title": "Passages par heure"}
    },
    "color": {
      "field": "id",
      "legend": {"title": "Compteur"},
      "scale": {"range": ["#75CBB7", "#CAE26E"]}
    },
    "tooltip": [
      {"field": "id", "title": "Sens"},
      {
        "field": "time",
        "title": "Moment",
        "type": "temporal",
        "format": "%H:%M"
      },
      {"field": "count", "title": "Passages"},
      {"field": "total", "title": "Passages total"}
    ]
  }
}